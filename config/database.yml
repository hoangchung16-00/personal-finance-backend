# SQLite/other adapters removed â€” this file is focused on PostgreSQL
default: &default
  adapter: postgresql
  encoding: unicode
  # Use DATABASE_URL if provided (e.g. in production or when using Docker/Heroku).
  # Otherwise use the explicit connection settings below (from env vars with sensible defaults).
  url: <%= ENV['DATABASE_URL'].presence %>
  pool: <%= ENV.fetch('DB_POOL') { ENV.fetch('RAILS_MAX_THREADS', 5) } %>
  timeout: 5000

development:
  <<: *default
  # If DATABASE_URL is not set, Rails will use the following settings.
  database: <%= ENV.fetch('PG_DATABASE') { "personal_finance_development" } %>
  username: <%= ENV.fetch('PG_USERNAME') { "postgres" } %>

test:
  <<: *default
  database: <%= ENV.fetch('PG_DATABASE_TEST') { "personal_finance_test" } %>
  username: <%= ENV.fetch('PG_USERNAME') { "postgres" } %>

production:
  <<: *default
  # Prefer DATABASE_URL in production (set by hosting provider or your deployment pipeline).
  # If you need explicit values, provide PG_* env vars in your production environment.
  database: <%= ENV['PG_DATABASE'] %>
  username: <%= ENV['PG_USERNAME'] %>
  password: <%= ENV['PG_PASSWORD'] %>
  host: <%= ENV['PG_HOST'] %>
  port: <%= ENV['PG_PORT'] %>
  # Optional: require SSL in production
  # sslmode: <%= ENV.fetch('PG_SSLMODE', 'require') %>